{% extends "base.html" %}

{% block header %}
{% endblock header %}

{% block content %}
    <div class = "container">
    <div class = "card">
        <h5  class = "card-header">{{ object.title }}</h5>
        <div class = "card-body">
            <audio src = {{object.audio.url}}  controls></audio>
            <button onclick="api_like()" class = "btn btn-primary btn-sm">いいね</button>
            <a href = "{% url "list"  %}" class = "btn btn-primary btn-sm">戻る</a>
        </div>
    </div>
    </div>
    <script>
    function api_like() {
        var api_url = "{% url 'evaluation' object.pk %}";
        var btn = document.getElementById("iine");
        var request = new XMLHttpRequest();
        request.onreadystatechange = function () {
            if (request.readyState === 4 && request.status === 200) {
                var received_data = JSON.parse(request.responseText);
                btn.innerText = received_data.iine;
            }
        }
        request.open("GET",api_url);
        request.send();
        }
    </script>

{% endblock content %}
